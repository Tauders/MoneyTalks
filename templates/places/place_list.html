{% extends 'base.html' %}

{% block title %}Список мест{% endblock %}

{% block content %}
  {{ block.super }}
  <h2>Список мест</h2>
  {% if object_list %}
    <table class="table table-hover">
      <thead>
      <tr>
        <th>#</th>
        <th>Название</th>
        <th>Действия</th>
      </tr>
      </thead>
      <tbody>
      {% for place in object_list %}
        <tr>
          <td class="counter-width">{{ forloop.counter }}</td>
          <td>{{ place }}</td>
          <td class="action-width">
            <a href="{% url 'place_update' place.pk %}" class="btn btn-default">Изменить</a>
            <a data-id="{{ place.pk }}" class="btn btn-danger" href="#">Удалить</a>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  {% endif %}
  <a class="btn btn-primary col-md-1" href="{% url 'place_create' %}">Создать</a>
  <script type="text/javascript">
    $(".btn-danger").on("click", function () {
      var button = $(this);
      var id = button.data("id");
      if (confirm('Вы уверены, что хотите удалить это место?') == true) {
        ajaxPost('{% url 'place_delete' %}', {'pk': id}, function (content) {
          button.parent().parent().hide();
        })
      } else {
        return false;
      }
    });
  </script>
{% endblock content %}
